<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../admin.css">
    <link rel="shortcut icon" href="../../compu.png">
    <title>Gian Luca Barbaro</title>
</head>
<body>

    <header>
        <div id="navbar">
            <nav class="navbar navbar-expand-lg bg-body-tertiary navbar-dark">
                <div class="container-fluid">
                    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="navbar-brand" th:href="@{/}">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="navbar-brand" th:href="@{/logout}">Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <p th:if="${success != null}" th:text="${success}" class="alert alert-success"></p>
    <p th:if="${error != null}" th:text="${error}" class="alert alert-danger"></p>

    <div id="edit-container" class="mt-5 ms-5">
        <div id="aboutme">
            <div class="d-flex">
                <h3 class="head mb-4"><strong>About me</strong></h3>
                <h5>edit</h5>
            </div>

            <form th:action="@{/about/edit}" method="POST">
                <input type="hidden" th:value="${user.id}" name="id">
                <div class="mb-3">
                  <label for="inputAbout1" class="form-label">Title</label>
                  <input type="text" class="form-control" id="inputAbout1" name="mainContent" th:value="${user.aboutme.mainContent}">
                </div>
                <div class="mb-3">
                  <label for="inputAbout2" class="form-label">Content</label>
                  <input type="text" class="form-control" id="inputAbout2" name="content" th:value="${user.aboutme.content}">
                </div>
                <button type="submit">Save</button>
            </form>
        </div>

        <div id="cv">
            <div class="d-flex">
                <h3 class="head mb-4"><strong>Curriculum Vitae</strong></h3>
                <h5>edit</h5>
            </div>

            <form th:action="@{/pdf/edit}" method="POST" enctype="multipart/form-data">
                <input type="hidden" th:value="${user.id}" name="id">
                <div class="mb-3">
                  <label for="inputCV" class="form-label">PDF File</label>
                  <input type="file" class="form-control" id="inputCV" name="file" th:if="${user.pdf != null}" th:src="${'/pdf/'} + ${user.pdf.id}">
                </div>
                <button type="submit">Save</button>
            </form>
        </div>
    </div>

    <div id="skills">
        <div class="d-flex">
            <h3 class="head mb-4"><strong>Skills</strong></h3>
            <h5>list</h5>

            <div id="addskill">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#example" data-bs-whatever="@mdo">Add skill</button>

                <div class="modal fade" id="example" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel1">Add skill</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form th:action="@{/skill/add}" method="POST">
                                    <input type="hidden" th:value="${user.id}" name="id">
                                    <div class="mb-3">
                                        <label for="recipient-name1" class="col-form-label">Name:</label>
                                        <input type="text" class="form-control" id="recipient-name1" name="skill_name">
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary">Save</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <table id="list" class="table table-light table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Active</th>
                    <th scope="col" style="width: 20%;"></th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="skill:${user.skills}">
                    <td th:text="${skill.skill_name}"></td>
                    <td th:text="${skill.active}"></td>
                    <td th:switch="${skill.active == true}">
                        <div th:case="${TRUE}" class="d-flex">
                            <a th:href="@{/skill/disable/} + ${skill.id} + @{/} + ${user.id}" class="btn btn-secondary">Disable</a>
                            <a th:href="@{/skill/delete/} + ${skill.id} + @{/} + ${user.id}" class="btn btn-danger">Delete</a>
                        </div>
                        <div th:case="*" class="d-flex">
                            <a th:href="@{/skill/enable/} + ${skill.id} + @{/} + ${user.id}" class="btn btn-secondary">Enable</a>
                            <a th:href="@{/skill/delete/} + ${skill.id} + @{/} + ${user.id}" class="btn btn-danger">Delete</a>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="projects">
        <div class="d-flex">
            <h3 class="head mb-4"><strong>Projects</strong></h3>
            <h5>list</h5>

            <div id="addproject">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">Add project</button>

                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Add project</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form th:action="@{/project/add}" method="POST" enctype="multipart/form-data">
                                    <input type="hidden" th:value="${user.id}" name="id">
                                    <div class="mb-3">
                                        <label for="" class="col-form-label">Name:</label>
                                        <input type="text" class="form-control" id="" name="project_name">
                                    </div>
                                    <div class="mb-3">
                                        <label for="" class="col-form-label">Description:</label>
                                        <input type="text" class="form-control" id="" name="description">
                                    </div>
                                    <div class="mb-3">
                                        <label for="" class="col-form-label">Picture:</label>
                                        <input type="file" class="form-control" id="" name="file">
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary">Save</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <table id="list" class="table table-light table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Description</th>
                    <th scope="col">Picture</th>
                    <th scope="col">Uploaded date</th>
                    <th scope="col">Active</th>
                    <th scope="col" style="width: 20%;"></th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="project:${user.projects}">
                    <td th:text="${project.project_name}"></td>
                    <td th:text="${project.description}"></td>
                    <td th:text="${project.photo.mime}"></td>
                    <td th:text="${project.uploaded_date}"></td>
                    <td th:text="${project.active}"></td>
                    <td th:switch="${project.active == true}">
                        <div th:case="${TRUE}" class="d-flex">
                            <a th:href="@{/project/disable/} + ${project.id} + @{/} + ${user.id}" class="btn btn-secondary">Disable</a>
                            <a th:href="@{/project/delete/} + ${project.id} + @{/} + ${user.id}" class="btn btn-danger">Delete</a>
                        </div>
                        <div th:case="*" class="d-flex">
                            <a th:href="@{/project/enable/} + ${project.id} + @{/} + ${user.id}" class="btn btn-secondary">Enable</a>
                            <a th:href="@{/project/delete/} + ${project.id} + @{/} + ${user.id}" class="btn btn-danger">Delete</a>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="main.js"></script>
</body>
</html>